import{r as e,v as n,n as t,d as o,o as a,c as i,a as l,b as r,e as s,f as d,w as u,F as c,M as p,g as f}from"./vendor.1b08dea0.js";function v(o={}){const{immediate:a=!0,onNeedRefresh:i,onOfflineReady:l,onRegistered:r,onRegisterError:s}=o,d=e(!1),u=e(!1);return{updateServiceWorker:function(e={}){const{immediate:o=!1,onNeedRefresh:a,onOfflineReady:i,onRegistered:l,onRegisterError:r}=e;let s,d;if("serviceWorker"in navigator){s=new n("/pwabilerplate/sw.js",{scope:"/pwabilerplate/"}),s.addEventListener("activated",(e=>{e.isUpdate||null==i||i()}));{const e=()=>{null==a||a()};s.addEventListener("waiting",e),s.addEventListener("externalwaiting",e)}s.register({immediate:o}).then((e=>{d=e,null==l||l(e)})).catch((e=>{null==r||r(e)}))}return async(e=!0)=>{e&&(null==s||s.addEventListener("controlling",(e=>{e.isUpdate&&window.location.reload()}))),d&&d.waiting&&await t(d.waiting,{type:"SKIP_WAITING"})}}({immediate:a,onNeedRefresh(){d.value=!0,null==i||i()},onOfflineReady(){u.value=!0,null==l||l()},onRegistered:r,onRegisterError:s}),offlineReady:u,needRefresh:d}}const{updateServiceWorker:w}=v();var g=o({name:"ReloadPWA",setup(){const{offlineReady:e,needRefresh:n,updateServiceWorker:t}=v();return{offlineReady:e,needRefresh:n,updateServiceWorker:t,close:async()=>{e.value=!1,n.value=!1}}},methods:{async close(){this.offlineReady.value=!1,this.needRefresh.value=!1},async updateServiceWorker(){await w()}}});const m={key:0,class:"\n      flex flex-wrap\n      md:flex-nowrap\n      bg-pink-900\n      text-white text-sm\n      px-6\n      py-2\n      justify-between\n      align-middle\n    ",role:"alert"},h={class:"message mt-1"},b={key:0},y={key:1},R={class:"buttons flex align-middle mt-2 md:mt-0"};g.render=function(e,n,t,o,s,d){return e.offlineReady||e.needRefresh?(a(),i("div",m,[l("div",h,[e.offlineReady?(a(),i("span",b," App ready to work offline ")):(a(),i("span",y," New content available, click on reload button to update. "))]),l("div",R,[e.needRefresh?(a(),i("button",{key:0,onClick:n[0]||(n[0]=n=>e.updateServiceWorker()),class:"\n          w-full\n          px-4\n          py-2\n          text-sm text-white\n          leading-none\n          transition-colors\n          duration-150\n          bg-pink-900\n          border border-white\n          rounded\n          sm:w-auto\n          active:bg-pink-600\n          hover:bg-pink-700\n          focus:outline-none focus:shadow-outline-purple\n          mr-4\n        "}," Reload ")):r("",!0),l("button",{onClick:n[1]||(n[1]=(...n)=>e.close&&e.close(...n)),class:"\n          w-full\n          px-4\n          py-2\n          text-sm text-white\n          leading-none\n          transition-colors\n          duration-150\n          bg-pink-900\n          border border-white\n          rounded\n          sm:w-auto\n          active:bg-pink-600\n          hover:bg-pink-700\n          focus:outline-none focus:shadow-outline-purple\n        "}," Close ")])])):r("",!0)};const k=l("div",{w:"full",flex:"~",justify:"center"},[l("img",{alt:"Vue logo",src:"/pwabilerplate/assets/logo.03d6d6da.png"})],-1),x=l("p",null,"this app is pwa with vue and vite",-1),S=l("h4",null,"would you like to install this app on your screen phone?",-1);f(o({setup(n){const t=e(!1),o=()=>{t.value=!1,l.prompt(),l.userChoice.then((e=>{"accepted"===e.outcome?console.log("user accepted the A2HS prompt"):console.log("user dismissed the A2HS prompt"),t.value=!1,l=null}))};let l=null;return s((()=>{let e=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);window.addEventListener("beforeinstallprompt",(n=>{n.preventDefault(),l=n,e&&(t.value=!0)}))})),(e,n)=>{const l=p;return a(),i(c,null,[d(g),k,x,d(l,{visible:t.value,"onUpdate:visible":n[0]||(n[0]=e=>t.value=e),title:"Basic Modal",onOk:o,onCancel:n[1]||(n[1]=e=>t.value=!1)},{default:u((()=>[S])),_:1},8,["visible"])],64)}}})).mount("#app");
